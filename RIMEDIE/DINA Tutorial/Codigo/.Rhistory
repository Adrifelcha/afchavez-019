##########################################################################################
#Código basico generado por Guaner Rojas para ELSEN 06 matematica
#Funciona como inicio para probar otros modelos y metodologías
##########################################################################################
rm(list=ls())
library(foreign)
setwd("C:/Users/sandra/Desktop/afchavez-019/RIMEDIE/Codigos_Guaner/Replica Fel")
##########################################################################################
#leer aqui directamente
m.dat.q<-read.table("m_dat_q0.txt",header = T)
#m.dat.q<- data.frame(m.dat.q[sample(nrow(m.dat.q), 3000),])
FEM<-c(1:8,26:34); length(FEM) #Primaria
MIN<-c(9:14,35:39); length(MIN) #Primaria
SPA<-c(15:25,40:50); length(SPA) #Primaria
qes <- read.table("q_matrices_mdatq_modificada.txt")
q1<-qes[1:17,1:12]; dim(q1)         #Primaria
q2<-qes[18:28,1:10]; dim(q2)        #Primaria
q3<-qes[29:50,]; dim(q3)            #Primaria
##########################################################################################
#install.packages("CDM")
d1 <- din(m.dat.q[1:612,FEM], q.matr = q1, rule = "DINA",
conv.crit = 0.01, maxit = 500, progress = TRUE)
summary(d1)
write.table(d1$item, "itempars_fem_ag.txt", sep="\t")
write.table(d1$skill.patt, "skilpatt_fem_ag.txt", sep="\t")
write.table(data.frame(d1$pattern), "fempostpattern_ag.txt", sep="\t",row.names = F)
write.csv(d1$item, "itempars_fem_ag.csv")
write.csv(d1$skill.patt, "skilpatt_fem_ag.csv")
write.csv(data.frame(d1$pattern), "fempostpattern_ag.csv",row.names = F)
##########################################################################################
#install.packages("CDM")
library("CDM")
d1 <- din(m.dat.q[1:612,FEM], q.matr = q1, rule = "DINA",
conv.crit = 0.01, maxit = 500, progress = TRUE)
summary(d1)
write.table(d1$item, "itempars_fem_ag.txt", sep="\t")
write.table(d1$skill.patt, "skilpatt_fem_ag.txt", sep="\t")
write.table(data.frame(d1$pattern), "fempostpattern_ag.txt", sep="\t",row.names = F)
write.csv(d1$item, "itempars_fem_ag.csv")
write.csv(d1$skill.patt, "skilpatt_fem_ag.csv")
write.csv(data.frame(d1$pattern), "fempostpattern_ag.csv",row.names = F)
#############################################################
# Codigo Prueba Paquete CDM
#############################################################
rm(list=ls())                       #Limpiamos variables
setwd("C:/Users/Alejandro/Desktop/afchavez19/RIMEDIE/DINA Tutorial/Codigo")
library(CDM)
Respuestas <- read.table("m_dat_q0.txt",header = T)
#############################################################
# Codigo Prueba Paquete CDM
#############################################################
rm(list=ls())                       #Limpiamos variables
setwd("C:/Users/sandra/Desktop/afchavez-019/RIMEDIE/DINA Tutorial/Codigo")
library(CDM)
Respuestas <- read.table("m_dat_q0.txt",header = T)
#############################################################
# Codigo Prueba Paquete CDM
#############################################################
rm(list=ls())                       #Limpiamos variables
setwd("C:/Users/sandra/Desktop/afchavez-019/RIMEDIE/DINA Tutorial/Codigo")
library(CDM)
Datos <- read.table("m_dat_q0.txt",header = T)
Respuestas <- read.table("m_dat_q0.txt",header = T)       #Archivo con matriz ParticipantexItem que señala con 0 y 1 los aciertos y errores
Respuestas$SEXO <- NULL
Respuestas$MARGINC <- NULL
Respuestas$SERV <- NULL
Respuestas$ID_SERV <- NULL    #Se eliminan las columnas innecesarias
Respuestas$NOM_ENT <- NULL
Respuestas$ESCUELA <- NULL
Respuestas$ID_ENT <- NULL
Respuestas$ALUMNO <- NULL
#View(Respuestas)
Qmat <- read.csv("QMatriz_Own.csv")                #Matriz Q:  ItemxHabilidad con valores 0 y 1 que señalan cuáles de las 35 habilidades se requiern por item
Qmat[is.na(Qmat)] <- 0                             #Se sustituyen los espacios en blanco con valores 0
Eje1 <- NULL
Eje2 <- NULL
Eje3 <- NULL
e1 <- 0
e2 <- 0
e3 <- 0
for(i in 1:nrow(Qmat)){                            #Se identifica a los ítems que pertenecen a cada Eje temático
if(Qmat$Eje[i]=="1-EFM"){
e1 <- e1 + 1
Eje1[e1] <- Qmat$Item[i]
}else{
if(Qmat$Eje[i]=="2 - MI"){
e2 <- e2+1
Eje2[e2] <- Qmat$Item[i]
}else{
e3 <- e3+1
Eje3[e3] <- Qmat$Item[i]
}}}
Eje1
Eje2
Eje3
##########################################################################################
#Código basico generado por Guaner Rojas para ELSEN 06 matematica
#Funciona como inicio para probar otros modelos y metodologías
##########################################################################################
rm(list=ls())
library(foreign)
setwd("C:/Users/sandra/Desktop/afchavez-019/RIMEDIE/Codigos_Guaner/Replica Fel")
##########################################################################################
#leer aqui directamente
m.dat.q<-read.table("m_dat_q0.txt",header = T)
#m.dat.q<- data.frame(m.dat.q[sample(nrow(m.dat.q), 3000),])
FEM<-c(1:8,26:34); length(FEM) #Primaria
MIN<-c(9:14,35:39); length(MIN) #Primaria
SPA<-c(15:25,40:50); length(SPA) #Primaria
qes <- read.table("q_matrices_mdatq_modificada.txt")
q1<-qes[1:17,1:12]; dim(q1)         #Primaria
q2<-qes[18:28,1:10]; dim(q2)        #Primaria
q3<-qes[29:50,]; dim(q3)
m.dat.q[,FEM]
#############################################################
# Codigo Prueba Paquete CDM
#############################################################
rm(list=ls())                       #Limpiamos variables
setwd("C:/Users/sandra/Desktop/afchavez-019/RIMEDIE/DINA Tutorial/Codigo")
library(CDM)
Datos <- read.table("m_dat_q0.txt",header = T)
Respuestas <- read.table("m_dat_q0.txt",header = T)       #Archivo con matriz ParticipantexItem que señala con 0 y 1 los aciertos y errores
Respuestas$SEXO <- NULL
Respuestas$MARGINC <- NULL
Respuestas$SERV <- NULL
Respuestas$ID_SERV <- NULL    #Se eliminan las columnas innecesarias
Respuestas$NOM_ENT <- NULL
Respuestas$ESCUELA <- NULL
Respuestas$ID_ENT <- NULL
Respuestas$ALUMNO <- NULL
R_E1<-Respuestas[,c(1:8,26:34)]
R_E2<-Respuestas[,c(9:14,35:39)]
R_E3<-Respuestas[,c(15:25,40:50)]
#View(Respuestas)
Qmat <- read.table("q_matrices_mdatq_modificada.txt")                #Matriz Q:  ItemxHabilidad con valores 0 y 1 que señalan cuáles de las 35 habilidades se requiern por item
Q_E1<-Qmat[1:17,1:12]
Q_E2<-Qmat[18:28,1:10]
Q_E3<-Qmat[29:50,]
#View(Qmat)
#############################################################
# Codigo Prueba Paquete CDM
#############################################################
rm(list=ls())                       #Limpiamos variables
setwd("C:/Users/sandra/Desktop/afchavez-019/RIMEDIE/DINA Tutorial/Codigo")
library(CDM)
Datos <- read.table("m_dat_q0.txt",header = T)
Respuestas <- read.table("m_dat_q0.txt",header = T)       #Archivo con matriz ParticipantexItem que señala con 0 y 1 los aciertos y errores
Respuestas$SEXO <- NULL
Respuestas$MARGINC <- NULL
Respuestas$SERV <- NULL
Respuestas$ID_SERV <- NULL    #Se eliminan las columnas innecesarias
Respuestas$NOM_ENT <- NULL
Respuestas$ESCUELA <- NULL
Respuestas$ID_ENT <- NULL
Respuestas$ALUMNO <- NULL
R_E1<-Respuestas[,c(1:8,26:34)]
R_E2<-Respuestas[,c(9:14,35:39)]
R_E3<-Respuestas[,c(15:25,40:50)]
#View(Respuestas)
Qmat <- read.table("q_matrices_mdatq_modificada.txt")                #Matriz Q:  ItemxHabilidad con valores 0 y 1 que señalan cuáles de las 35 habilidades se requiern por item
Q_E1<-Qmat[1:17,1:12]
Q_E2<-Qmat[18:28,1:10]
Q_E3<-Qmat[29:50,]
#View(Qmat)
###########################################################
# DINA
DINA_1 <- din(R_E1, Q_E1, skillclasses=NULL,
conv.crit=0.001, dev.crit=10^(-2), maxit=500,
constraint.guess=NULL, constraint.slip=NULL,
guess.init= rep(0.25, ncol(R_E1)), slip.init=guess.init,
guess.equal=FALSE, slip.equal=FALSE, zeroprob.skillclasses=NULL,
weights=rep(1, nrow(R_E1)), rule="DINA",
wgt.overrelax=0, wgtest.overrelax=FALSE, param.history=FALSE,
seed=125, progress=TRUE, guess.min=0, slip.min=0, guess.max=1, slip.max=1)
write.csv(DINA_1$item, "E1_FEM_itemparameters.csv")
write.csv(DINA_1$skill.patt, "E1_FEM_skilpatterns.csv")
write.csv(data.frame(DINA_1$pattern), "E1_FEM_postpattern.csv",row.names = F)
DINA_2 <- din(R_E2, Q_E2, skillclasses=NULL,
conv.crit=0.001, dev.crit=10^(-2), maxit=500,
constraint.guess=NULL, constraint.slip=NULL,
guess.init= rep(0.25, ncol(R_E2)), slip.init=guess.init,
guess.equal=FALSE, slip.equal=FALSE, zeroprob.skillclasses=NULL,
weights=rep(1, nrow(R_E2)), rule="DINA",
wgt.overrelax=0, wgtest.overrelax=FALSE, param.history=FALSE,
seed=125, progress=TRUE, guess.min=0, slip.min=0, guess.max=1, slip.max=1)
write.csv(DINA_2$item, "E2_MI_itemparameters.csv")
write.csv(DINA_2$skill.patt, "E2_MI_skilpatterns.csv")
write.csv(data.frame(DINA_2$pattern), "E2_MI_postpattern.csv",row.names = F)
DINA_3 <- din(R_E3, Q_E3, skillclasses=NULL,
conv.crit=0.001, dev.crit=10^(-2), maxit=500,
constraint.guess=NULL, constraint.slip=NULL,
guess.init= rep(0.25, ncol(R_E3)), slip.init=guess.init,
guess.equal=FALSE, slip.equal=FALSE, zeroprob.skillclasses=NULL,
weights=rep(1, nrow(R_E3)), rule="DINA",
wgt.overrelax=0, wgtest.overrelax=FALSE, param.history=FALSE,
seed=125, progress=TRUE, guess.min=0, slip.min=0, guess.max=1, slip.max=1)
write.csv(DINA_3$item, "E3_SNPA_itemparameters.csv")
write.csv(DINA_3$skill.patt, "E3_SNPA_skilpatterns.csv")
write.csv(data.frame(DINA_3$pattern), "E3_SNPA_postpattern.csv",row.names = F)
